{"version":3,"sources":["webpack:///./components/editor/paragraph/paragraph.css","webpack:///./components/editor/add_button/addButton.css","webpack:///./routes/home/style.css","webpack:///./components/button/button.tsx","webpack:///./components/editor/add_button/addBoxIcon.tsx","webpack:///./components/editor/add_button/addButton.tsx","webpack:///./components/editor/paragraph/arrowDownwardIcon.tsx","webpack:///./components/editor/paragraph/arrowUpwardIcon.tsx","webpack:///./components/editor/paragraph/deleteIcon.tsx","webpack:///./components/editor/paragraph/paragraph.tsx","webpack:///./components/editor/preview/preview.tsx","webpack:///./components/editor/editor.tsx","webpack:///./routes/home/index.tsx","webpack:///./components/card/card.css","webpack:///./components/button/button.css","webpack:///./components/editor/editor.css","webpack:///./components/styles/japanese.css","webpack:///./components/editor/preview/preview.css"],"names":["module","exports","Button","props","otherProps","classNameToApply","style","btn","className","type","children","AddBoxIcon","xmlns","height","viewBox","width","d","AddButton","dispatch","useContext","EditorContext","onClick","useCallback","addParagraph","buttonStyle","AllowDownwardIcon","AllowUpwardIcon","DeleteIcon","Paragraph","state","p","paragraphs","id","bindDispatch","fn","args","index","isLastItem","list","length","onMoveUpward","moveParagraph","onMoveDownward","ParagraphPresenter","text","isSorting","focus","lastAdded","onChange","updateParagraphText","onDelete","deleteParagraph","e","currentTarget","value","preventDefault","textArea","useRef","useEffect","current","scrollHeight","textAreaId","controlTabIndex","cardStyle","card","pStyle","paragraph","data-is-editing","move","aria-label","tabIndex","disabled","textarea","name","ref","onKeyUp","onPaste","placeholder","count","delete","Preview","useMemo","map","lines","split","reduce","acc","i","key","jpStyle","preview","Editor","editor","showsPreview","Home","home"],"mappings":"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","file":"route-home.chunk.d5991.esm.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"paragraph\":\"paragraph__3XZVW\",\"textarea\":\"textarea__lochO\",\"label-text\":\"label-text__3th0i\",\"count\":\"count__1uRWR\",\"edit-form\":\"edit-form__1rRzC\",\"delete\":\"delete__3Sp8N\",\"move\":\"move__3cboQ\",\"move-button\":\"move-button__163WB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"add-button\":\"add-button__1KgZw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"home__5d1wS\"};","import { ComponentChildren, h } from \"preact\";\nimport style from \"./button.css\";\n\nexport interface ButtonProps {\n  className?: string;\n  type?: \"primary\";\n  onClick?: (e: MouseEvent) => void;\n  children?: ComponentChildren;\n  tabIndex?: number;\n}\n\nexport function Button(props: ButtonProps) {\n  const { className, type, ...otherProps } = props;\n  let classNameToApply = `${style.btn} ${props.className}`;\n  if (props.type === \"primary\") {\n    classNameToApply += ` ${style[\"btn-primary\"]}`;\n  }\n  return (\n    <button className={classNameToApply} {...otherProps}>\n      {props.children}\n    </button>\n  );\n}\n","import { h } from \"preact\";\n\nexport function AddBoxIcon(props: { className?: string }) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      width=\"24\"\n      {...props}\n    >\n      <path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\" />\n    </svg>\n  );\n}\n","import { h } from \"preact\";\nimport { Button } from \"../../button/button\";\nimport { AddBoxIcon } from \"./addBoxIcon\";\nimport style from \"./addButton.css\";\nimport buttonStyle from \"../../button/button.css\";\nimport { useCallback, useContext } from \"preact/hooks\";\nimport { addParagraph, EditorContext } from \"../editorState\";\n\nexport function AddButton() {\n  const { dispatch } = useContext(EditorContext);\n  const onClick = useCallback(() => {\n    dispatch(addParagraph());\n  }, []);\n  return (\n    <Button className={style[\"add-button\"]} type=\"primary\" onClick={onClick}>\n      <AddBoxIcon className={buttonStyle[\"btn-icon\"]} /> <span>追加する</span>\n    </Button>\n  );\n}\n","import { h } from \"preact\";\n\nexport function AllowDownwardIcon() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      width=\"24\"\n    >\n      <path d=\"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\" />\n    </svg>\n  );\n}\n","import { h } from \"preact\";\n\nexport function AllowUpwardIcon() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      width=\"24\"\n    >\n      <path d=\"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\" />\n    </svg>\n  );\n}\n","import { h } from \"preact\";\n\nexport function DeleteIcon() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      width=\"24\"\n    >\n      <path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\" />\n    </svg>\n  );\n}\n","import { h } from \"preact\";\nimport { useCallback, useContext, useEffect, useRef } from \"preact/hooks\";\nimport cardStyle from \"../../card/card.css\";\nimport {\n  deleteParagraph,\n  EditorAction,\n  EditorContext,\n  moveParagraph,\n  updateParagraphText,\n} from \"../editorState\";\nimport { AllowDownwardIcon } from \"./arrowDownwardIcon\";\nimport { AllowUpwardIcon } from \"./arrowUpwardIcon\";\nimport { DeleteIcon } from \"./deleteIcon\";\nimport pStyle from \"./paragraph.css\";\n\ninterface ParagraphProps {\n  id: string;\n\n  index: number;\n}\n\nexport function Paragraph(props: ParagraphProps) {\n  const { state, dispatch } = useContext(EditorContext);\n  const p = state.paragraphs[props.id];\n  if (!p) {\n    return null;\n  }\n  const bindDispatch = useCallback(function <\n    A extends unknown[],\n    B extends EditorAction\n  >(fn: (...args: A) => B) {\n    return useCallback((...args: A) => {\n      dispatch(fn(...args));\n    }, []);\n  },\n  []);\n  const index = props.index;\n  const isLastItem = index === state.list.length - 1;\n  const onMoveUpward = useCallback(() => {\n    dispatch(moveParagraph(index, index - 1));\n  }, [index]);\n  const onMoveDownward = useCallback(() => {\n    dispatch(moveParagraph(index, index + 1));\n  }, [index]);\n  return (\n    <ParagraphPresenter\n      id={props.id}\n      index={index}\n      text={p.text}\n      isSorting={state.isSorting}\n      isLastItem={isLastItem}\n      focus={index === state.lastAdded}\n      onChange={bindDispatch(updateParagraphText)}\n      onDelete={bindDispatch(deleteParagraph)}\n      onMoveUpward={onMoveUpward}\n      onMoveDownward={onMoveDownward}\n    />\n  );\n}\n\ninterface ParagraphPresenterProps {\n  id: string;\n  index: number;\n  text: string;\n  isSorting: boolean;\n  isLastItem: boolean;\n  focus: boolean;\n  onChange(text: string, id: string): void;\n  onDelete(id: string): void;\n  onMoveUpward(): void;\n  onMoveDownward(): void;\n}\n\nexport function ParagraphPresenter(props: ParagraphPresenterProps) {\n  const onChange = useCallback(\n    (e: Event) => {\n      props.onChange?.((e.currentTarget as HTMLInputElement).value, props.id);\n    },\n    [props.onChange, props.id]\n  );\n  const onDelete = useCallback(\n    (e: Event) => {\n      e.preventDefault();\n      props.onDelete?.(props.id);\n    },\n    [props.id]\n  );\n  const textArea = useRef<HTMLTextAreaElement | null>(null);\n\n  useEffect(() => {\n    if (props.focus) {\n      textArea.current?.focus();\n    }\n  }, [props.focus]);\n  useEffect(() => {\n    if (textArea.current) {\n      if (props.text.length === 0) {\n        textArea.current.style.height = \"\";\n      } else {\n        textArea.current.style.height = `${textArea.current?.scrollHeight}px`;\n      }\n    }\n  }, [props.text]);\n  const textAreaId = `paragraph-${props.index}`;\n  const controlTabIndex = props.isSorting ? 0 : -1;\n  return (\n    <li\n      className={`${cardStyle.card} ${pStyle.paragraph}`}\n      data-is-editing={props.isSorting ? \"true\" : \"false\"}\n    >\n      <div className={`${pStyle.move} ${pStyle[\"edit-form\"]}`}>\n        <button\n          className={pStyle[\"move-button\"]}\n          aria-label=\"上へ移動\"\n          tabIndex={controlTabIndex}\n          onClick={props.onMoveUpward}\n          disabled={props.index === 0}\n        >\n          <AllowUpwardIcon />\n        </button>\n        <button\n          className={pStyle[\"move-button\"]}\n          aria-label=\"下へ移動\"\n          tabIndex={controlTabIndex}\n          onClick={props.onMoveDownward}\n          disabled={props.isLastItem}\n        >\n          <AllowDownwardIcon />\n        </button>\n      </div>\n      <label className={pStyle.textarea}>\n        <textarea\n          id={textAreaId}\n          name={`paragraph-${props.index}`}\n          ref={textArea}\n          value={props.text}\n          onKeyUp={onChange}\n          onChange={onChange}\n          onPaste={onChange}\n          placeholder={props.index === 0 ? \"文章を入力\" : \"\"}\n        />\n        <div className={pStyle.count} aria-label=\"文字カウント\">\n          {props.text.length}\n        </div>\n        <span className={pStyle[\"label-text\"]}>段落</span>\n      </label>\n      <div className={`${pStyle.delete} ${pStyle[\"edit-form\"]}`}>\n        <button\n          onClick={onDelete}\n          aria-label=\"削除ボタン\"\n          tabIndex={controlTabIndex}\n        >\n          <DeleteIcon />\n        </button>\n      </div>\n    </li>\n  );\n}\n","import { h } from \"preact\";\nimport { useMemo } from \"preact/hooks\";\nimport { Paragraph } from \"../editorState\";\nimport style from \"./preview.css\";\nimport cardStyle from \"../../card/card.css\";\nimport jpStyle from \"../../styles/japanese.css\";\nimport { JSXInternal } from \"preact/src/jsx\";\n\nexport type PreviewProps = {\n  list: string[];\n  paragraph: Record<string, Paragraph>;\n};\n\nexport default function Preview(props: PreviewProps) {\n  const text = useMemo(() => {\n    return props.list.map((id) => {\n      const lines = (props.paragraph[id]?.text ?? \"\").split(\"\\n\");\n      const text = lines.reduce<(JSXInternal.Element | string)[]>(\n        (acc, text, i) => {\n          if (i === lines.length - 1) {\n            return [...acc, text];\n          } else {\n            return [...acc, text, <br key={`br-${i}`} />];\n          }\n        },\n        []\n      );\n      return (\n        <p\n          className={`${jpStyle[\"japanese-text\"]}`}\n          key={`preview-paragraph-${id}`}\n        >\n          {text}\n        </p>\n      );\n    });\n  }, [props.list, props.paragraph]);\n  return <div className={`${style.preview} ${cardStyle.card}`}>{text}</div>;\n}\n","import { h } from \"preact\";\nimport { useContext } from \"preact/hooks\";\nimport { AddButton } from \"./add_button/addButton\";\nimport style from \"./editor.css\";\nimport { EditorContext } from \"./editorState\";\nimport { Paragraph } from \"./paragraph/paragraph\";\nimport Preview from \"./preview/preview\";\n\nexport function Editor() {\n  const { state } = useContext(EditorContext);\n  return (\n    <div className={style.editor}>\n      <div>\n        <ul>\n          {state.list.map((id, index) => {\n            const p = state.paragraphs[id];\n            return (\n              p && (\n                <Paragraph key={`paragraph-${p.id}`} id={p.id} index={index} />\n              )\n            );\n          })}\n          <li>\n            <AddButton />\n          </li>\n        </ul>\n      </div>\n      {state.showsPreview && (\n        <div>\n          <Preview list={state.list} paragraph={state.paragraphs} />\n        </div>\n      )}\n    </div>\n  );\n}\n","import { FunctionalComponent, h } from \"preact\";\nimport { Editor } from \"../../components/editor/editor\";\nimport style from \"./style.css\";\n\nconst Home: FunctionalComponent = () => {\n  return (\n    <div className={style.home}>\n      <Editor />\n    </div>\n  );\n};\n\nexport default Home;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"card__3mJh1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"btn__ove9P\",\"btn-icon\":\"btn-icon__3KkgF\",\"btn-primary\":\"btn-primary__1R6Z0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor\":\"editor__1I80g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"japanese-text\":\"japanese-text__1TNcs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preview\":\"preview__2K3aJ\"};"],"sourceRoot":""}